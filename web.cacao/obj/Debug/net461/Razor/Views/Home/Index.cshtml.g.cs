#pragma checksum "C:\Users\Jose Madrid\source\repos\cacao-test\web.cacao\Views\Home\Index.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "3d74a3e68e61d193ece5405b63e20927c6603513"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Home_Index), @"mvc.1.0.view", @"/Views/Home/Index.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Views/Home/Index.cshtml", typeof(AspNetCore.Views_Home_Index))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "C:\Users\Jose Madrid\source\repos\cacao-test\web.cacao\Views\_ViewImports.cshtml"
using web.cacao;

#line default
#line hidden
#line 2 "C:\Users\Jose Madrid\source\repos\cacao-test\web.cacao\Views\_ViewImports.cshtml"
using web.cacao.Models;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"3d74a3e68e61d193ece5405b63e20927c6603513", @"/Views/Home/Index.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"43c7b1138b6f0169869e1769e4ab72650ef6307c", @"/Views/_ViewImports.cshtml")]
    public class Views_Home_Index : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        #line hidden
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#line 1 "C:\Users\Jose Madrid\source\repos\cacao-test\web.cacao\Views\Home\Index.cshtml"
  
    ViewData["Title"] = "CACAO TEST";

#line default
#line hidden
            BeginContext(46, 575, true);
            WriteLiteral(@"
<div class=""row"">
    <div class=""col-md-offset-5 col-md-3"">
        <h2>Cacao University</h2>
    </div>
</div>
<br />
<div class=""row"">
    <div class=""col-md-offset-1 col-md-5"">
        <button type=""button"" id=""btnNewStudent"" class=""btn btn-primary"">New Student</button>
    </div>
</div>
<input type=""hidden"" id=""txtTotalStudentAllowed"" value=""0"" />
<input type=""hidden"" id=""txtTotalStudent"" value=""0"" />

<div class=""row"" id=""divNewStudent"" style=""display:none; "">
    <div class=""col-md-offset-1 col-md-5"">
        <h2>Nuevo Estudiante</h2>
        ");
            EndContext();
            BeginContext(621, 713, false);
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "f16b985630094254b66a94929be0828e", async() => {
                BeginContext(627, 700, true);
                WriteLiteral(@"
            <div class=""form-group"">
                <label for=""txtStudentName"">Name</label>
                <input type=""text"" class=""form-control"" id=""txtStudentName"" placeholder=""Enter student name"">
            </div>
            <div class=""form-group"">
                <label for=""txtOriginalScore"">Original Score</label>
                <input type=""number"" class=""form-control"" id=""txtOriginalScore"" placeholder=""Enter original score"" min=""0"" max=""100"">
            </div>
            <button type=""button"" id=""btnSaveNewStudent"" class=""btn btn-success"">Guardar</button>
            <button type=""button"" id=""btnCancelNewStudent"" class=""btn btn-danger"">Cancelar</button>
        ");
                EndContext();
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            EndContext();
            BeginContext(1334, 1689, true);
            WriteLiteral(@"
    </div>
</div>
<br />
<div class=""row"" id=""divStudents"">
    <div class=""col-md-offset-1 col-md-10"">
        <table id=""tbStudents"" class=""table table-striped table-bordered"" style=""width:100%"">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Estudiante</th>
                    <th>Calificación Original</th>
                    <th>Calificación Final</th>
                </tr>
            </thead>
        </table>
    </div>
</div>

<script type=""text/javascript"">
    var table = null;

    $(document).ready(function () {
        LoadStudents();
    });

    $('#btnNewStudent').click(function () {
        if (!validTotalStudent()) {
            return;
        }
        $('#divNewStudent').show('fast');
        $('#divStudents').hide('fast');
        $('#btnNewStudent').hide('fast');
    });

    $('#btnCancelNewStudent').click(function () {
        ClearInputs();
    });

    $('#btnSaveNewStudent').click(function () ");
            WriteLiteral(@"{
        var name = $('#txtStudentName').val();
        var oriScore = $('#txtOriginalScore').val();

        if (name == '') {
            alert('Ingresa el nombre del estudiante');
            return;
        }

        if (oriScore == '') {
            alert('Favor de ingresar la calificacion inicial del estudiante.');
            return;
        } else if (parseInt(oriScore) <= 0 || parseInt(oriScore) > 100) {
            alert('La califiacion debe ser mayor a 0 y menor a 100.');
            return;
        }

        var json = {
            name,
            origin_score: oriScore
        };

        $.ajax({
            url: '");
            EndContext();
            BeginContext(3024, 33, false);
#line 95 "C:\Users\Jose Madrid\source\repos\cacao-test\web.cacao\Views\Home\Index.cshtml"
             Write(Url.Action("SaveStudent", "Home"));

#line default
#line hidden
            EndContext();
            BeginContext(3057, 878, true);
            WriteLiteral(@"',
            async: false,
            headers: { 'Accept': 'application/json', 'Content-Type': 'application/json' },
            type: 'POST',
            datatype: 'application/json',
            data: JSON.stringify(json),
            success: function (datos) {
                LoadStudents();
            }
        });

        ClearInputs();
    });

    function ClearInputs() {
        $('#txtStudentName').val('');
        $('#txtOriginalScore').val(0);
        $('#divNewStudent').hide('fast');
        $('#divStudents').show('fast');
        $('#btnNewStudent').show('fast');
    }

    function LoadStudents() {
        if ($.fn.DataTable.isDataTable('#tbStudents')) {
            $('#tbStudents').DataTable().destroy();
        }

        $('#tbStudents tbody').empty();

        table = $('#tbStudents');
        var urlApiLocal = '");
            EndContext();
            BeginContext(3936, 30, false);
#line 125 "C:\Users\Jose Madrid\source\repos\cacao-test\web.cacao\Views\Home\Index.cshtml"
                      Write(Url.Action("Students", "Home"));

#line default
#line hidden
            EndContext();
            BeginContext(3966, 2943, true);
            WriteLiteral(@"';

        $.ajax({
            url: urlApiLocal,
            type: 'GET',
            async: false,
            datatype: 'application/json',
            //data: filtros,
            success: function (datos) {
                if (datos.totalStudentAllowed <= 0) {
                    askUserTotalStudents();
                } else {
                }
                ClearInputs();
                console.log(datos);
                table.DataTable({
                    ""data"": datos.data.data,
                    ""columns"": [
                        { ""data"": ""id"", ""orderable"": false },
                        { ""data"": ""name"" },
                        { ""data"": ""origin_score"", ""orderable"": false },
                        { ""data"": ""final_score"", ""orderable"": false }
                    ],
                    buttons: [
                        'copy', 'excel', 'pdf'
                    ],
                    ""order"": [0, 'asc'],
                    ""language"": {
                ");
            WriteLiteral(@"        ""paginate"": {
                            ""next"": ""Siguiente"",
                            ""previous"": ""Anterior"",
                            ""first"": ""Primero"",
                            ""last"": ""Último""
                        },
                        ""search"": ""Buscar estudiante"",
                        ""zeroRecords"": ""No se encuentraron estudiantes con los criterios de búsqueda"",
                        ""emptyTable"": ""No hay estudiantes que mostrar"",
                        ""lengthMenu"": ""Muestra _MENU_ estudiantes"",
                        ""info"": ""Mostrando _START_ a _END_ de _TOTAL_ estudiantes""
                    },
                    ""scrollY"": ""400px"",
                    ""scrollcollapse"": true,
                    ""paging"": true
                });
                $('#txtTotalStudent').val(datos.data.data.length);
            }
        });
    }

    function askUserTotalStudents() {
        var total = '';
        var aux = parseInt(total);
        while (!N");
            WriteLiteral(@"umber.isInteger(aux)) {
            total = prompt(""Ingrese el límite permitido de estudiantes."", ""60"");
            aux = parseInt(total);
            if (total != null && Number.isInteger(aux)) {
                $('#txtTotalStudentAllowed').val(aux);
                saveAllowedStudents(total);
            } else {
                alert('Ingresar un valor numérico');
            }
        }
    }

    function validTotalStudent() {
        var totalAllowed = $('#txtTotalStudentAllowed').val();
        var currentTotal = $('#txtTotalStudent').val();

        if (currentTotal !== '0' && currentTotal >= totalAllowed) {
            alert('Ha llegado al máximo permitido de registro de estudiantes estipulado al inicio.');
            return false;
        }

        return true;
    }

    function saveAllowedStudents(total) {
        $.ajax({
            url: '");
            EndContext();
            BeginContext(6910, 36, false);
#line 203 "C:\Users\Jose Madrid\source\repos\cacao-test\web.cacao\Views\Home\Index.cshtml"
             Write(Url.Action("AllowedStudetn", "Home"));

#line default
#line hidden
            EndContext();
            BeginContext(6946, 297, true);
            WriteLiteral(@"',
            type: 'POST',
            async: false,
            datatype: 'application/json',
            data: {
                allowed: total
            },
            success: function (datos) {
                console.log('save');
            }
        });
    }

</script>
");
            EndContext();
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
